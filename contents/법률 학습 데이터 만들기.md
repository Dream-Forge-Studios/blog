---
date: '2023-12-16'
title: '법률 도메인 특화 LLM 개발을 위한 학습 데이터 만들기'
categories: ['LLM', 'Legal']
summary: '법률 도메인 특화 LLM을 만들기 위한 학습 데이터를 만들어보자.'
thumbnail: './test.png'
---

<br>

<br>

저는 법률 분야에 특화된 언어 모델(Legal Language Model, LLM)을 개발하는 것을 목표로 하고 있습니다. 

<br>

모델을 성공적으로 구축하기 위해서는 고품질의 데이터가 필수적입니다. 특히, 법률 분야에서 데이터의 정확성과 관련성은 모델의 효율성과 신뢰도에 직접적인 영향을 미칩니다.

<br>

하지만 한국의 법률 관련 오픈 데이터는 부족함이 많습니다. 이러한 문제를 해결하기 위해, 저는 기존의 판례와 법령을 GPT-4를 활용한 데이터 증강을 통해 양질의 학습데이터를 직접 만들고자 합니다.

<br>

판례는 학습하기에 너무 긴 데이터를 가지고 있습니다. 그래서 학습을 위해 요약이 필요합니다. 

<br>

[관련 논문](https://arxiv.org/abs/2306.01248)에서 진행된 연구에 따르면 LLM은 법률 데이터셋으로 특별히 훈련되지 않았음에도 불가하고 좋은 성능을 보인다는 연구 결과가 있습니다.

<br>

그래서 본 프로젝트는 현재 가장 좋은 성능을 보이는 LLM으로 알려져 있는 GPT-4를 활용하여 판례를 요약합니다.

<br>



<div id="판례 데이터"></div>

## 판례 데이터

본 프로젝트는 민사를 위한 LLM을 만드는 것을 목표로 민사 판례 데이터에 대해서만 다룹니다. 

<br>

추후에 Mixture of Experts (MOE)을 적용할 예정임으로 민사, 형사, 가사 등 사건종류에 맞는 LLM을 따로 개발할 예정입니다.

### JSON형식으로 정리

JSON은 데이터를 구조화된 형식(키-값 쌍)으로 저장합니다. 이는 데이터를 체계적이고 일관된 방식으로 조직화할 수 있게 해줍니다.

<br>

법률 데이터의 경우, 판례의 제목, 날짜, 내용, 관련 법률 조항 등 다양한 유형의 정보를 효과적으로 저장할 수 있습니다.

<style>
  table {
    border-collapse: collapse;
  }

  table, th, td {
    border: 1px solid black;
 text-align: center; 
  }
</style>

<table>
  <tr>
    <th>key</th>
    <th>value 정보</th>
    <th>value 양식</th>
  </tr>
  <tr>
    <td>url</td>
    <td>판례 url</td>
    <td>str</td>
  </tr>
  <tr>
    <td>cn-case-title</td>
    <td>사건 제목</td>
    <td>str</td>
  </tr>
  <tr>
    <td>case</td>
    <td>사건</td>
    <td>list</td>
  </tr>
  <tr>
    <td>plaintiffs</td>
    <td>원고</td>
    <td>list</td>
  </tr>
  <tr>
    <td>defendant</td>
    <td>피고</td>
    <td>list</td>
  </tr>
  <tr>
    <td>conclusion_date</td>
    <td>변론종결</td>
    <td>list</td>
  </tr>
  <tr>
    <td>judgment_date</td>
    <td>판결선고</td>
    <td>list</td>
  </tr>
  <tr>
    <td>judgment</td>
    <td>주문</td>
    <td>list</td>
  </tr>
  <tr>
    <td>request</td>
    <td>청구취지</td>
    <td>list</td>
  </tr>
  <tr>
    <td>reason</td>
    <td>이유</td>
    <td>JSON</td>
  </tr>
  <tr>
    <td>law</td>
    <td>관련 법률</td>
    <td>2차원 list (내부 요소: JSON)</td>
  </tr>
  <tr>
    <td>caseLaw</td>
    <td>관련 판례</td>
    <td>2차원 list (내부 요소: JSON)</td>
  </tr>
</table>

<br>

판례의 이유 항목에는 이미지 포함되는 경우가 있어 naver ocr를 통해 글씨를 추출하였습니다.

<br>

*reason 내부 JSON

<br>

<style>
  table {
    border-collapse: collapse;
  }

  table, th, td {
    border: 1px solid black;
 text-align: center; 
  }
</style>

<table>
  <tr>
    <th>key</th>
    <th>value 정보</th>
    <th>value 양식</th>
  </tr>
  <tr>
    <td>fcat</td>
    <td>사실</td>
    <td>2차원 list(내부 요소: str)</td>
  </tr>
  <tr>
    <td>claim</td>
    <td>주장</td>
    <td>2차원 list(내부 요소: str)</td>
  </tr>
  <tr>
    <td>judgement</td>
    <td>판단</td>
    <td>2차원 list(내부 요소: str)</td>
  </tr>
  <tr>
    <td>conclusion</td>
    <td>결론</td>
    <td>2차원 list(내부 요소: str)</td>
  </tr>
</table>

<br>

*law 내부 JSON

<br>

<style>
  table {
    border-collapse: collapse;
  }

  table, th, td {
    border: 1px solid black;
 text-align: center; 
  }
</style>

<table>
  <tr>
    <th>key</th>
    <th>value 정보</th>
    <th>value 양식</th>
  </tr>
  <tr>
    <td>text</td>
    <td>법률 정보</td>
    <td>str</td>
  </tr>
  <tr>
    <td>href</td>
    <td>법률 정보 url</td>
    <td>str</td>
  </tr>
  <tr>
    <td>date</td>
    <td>시행 날짜</td>
    <td>str</td>
  </tr>
</table>

<br>

*caseLaw 내부 JSON

<br>

<style>
  table {
    border-collapse: collapse;
  }

  table, th, td {
    border: 1px solid black;
 text-align: center; 
  }
</style>

<table>
  <tr>
    <th>key</th>
    <th>value 정보</th>
    <th>value 양식</th>
  </tr>
  <tr>
    <td>text</td>
    <td>사건명</td>
    <td>str</td>
  </tr>
  <tr>
    <td>href</td>
    <td>판례 url</td>
    <td>str</td>
  </tr>
</table>

<div id="Data Filtering"></div>

## Data Filtering

### De-duplication

LLM의 학습 데이터의 다양성을 유지하기 위해 사건명/법원/사건 종류/소송 결과/기간을 기반으로 일정한 개수로 맞추어 한쪽으로 편향되지 않도록 하였습니다. 

### Quality Filtering

신뢰할 수 있는 데이터 출처인 최근 3년 실제 판례를 활용하였습니다.

<div id="법률 데이터 연구"></div>

## 법률 데이터 연구

[AI 허브 법률 데이터](https://www.aihub.or.kr/aihubdata/data/list.do?pageIndex=1&currMenu=&topMenu=&dataSetSn=&srchdataClCode=DATACL001&srchDataTy=DATA003&searchKeyword=%EB%B2%95%EB%A5%A0&srchDetailCnd=DETAILCND001&srchOrder=ORDER001&srchPagePer=20)
[엘박스 데이터](https://github.com/lbox-kr/lbox-open)
[로앤컴퍼니 데이터](https://huggingface.co/datasets/lawcompany/KLAID?row=99)
[법제처 국가법령 공동활용 센터](https://huggingface.co/datasets/joonhok-exo-ai/korean_law_open_data_precedents)

1. 쉬운 것 > 어려운 것
2. 민사와 관련된 사건만 VS 아닌 사건도

### 데이터셋 분석

1. [의료, 법률 전문 서적 말뭉치](https://www.aihub.or.kr/aihubdata/data/view.do?currMenu=&topMenu=&aihubDataSe=data&dataSetSn=71487)
    - 확보한 의료 및 법률 전문 도서와 특허(의료), 판결문(법률)
   
      <br>
   
    - keyword가 추출

      <br>
   
   - 연구
     - keyword 추출의 영향
     - 의료 데이터의 영향

2. [법률 문서 기계독해 데이터](https://www.aihub.or.kr/aihubdata/data/view.do?currMenu=&topMenu=&aihubDataSe=data&dataSetSn=71610)
   - 법률 분야 전문문서를 활용한 지문-질문-답변으로 구성

     <br>

   - 데이터 정보
     <img style="width: 100%; margin-top: 40px;" id="output" src="./legalData/dataGumo.PNG">
     <img style="width: 100%; margin-top: 40px;" id="output" src="./legalData/dataBunpo.PNG">

     <br>

   - 연구
      - 다양한 Q/A 유형의 영향
      - 금융 데이터의 영향

3. [법률/규정 (판결서, 약관 등) 텍스트 분석 데이터](https://www.aihub.or.kr/aihubdata/data/view.do?currMenu=&topMenu=&aihubDataSe=data&dataSetSn=580)
    - 약관은 유리/불리가 나눠져 있음

      <br>

    - 연구
        - 민사를 위한 챗봇에 형사/행정 데이터가 필요한지
        - 약관의 유불리 데이터의 영향

4. [사실-법률](https://huggingface.co/datasets/lawcompany/KLAID)
    - 사실과 관련된 법률 제공

      <br>

    - 연구
        - 사실과 관련된 법률 찾는 태스크 학습 데이터 있을 때 vs 없을 때

5. [판례](https://huggingface.co/datasets/joonhok-exo-ai/korean_law_open_data_precedents)
    - 사건명/사건종류/참조조문(법)/참조판례

      <br>

    - 연구
        - 민사를 위한 챗봇에 형사/행정 데이터가 필요한지
        - 긴 글에서 사건명, 참조조문, 참조판례를 잘 이해하는지

6. [lbox_open](https://huggingface.co/datasets/joonhok-exo-ai/korean_law_open_data_precedents)
    - 사실-사건명 분류(민사,형사)/사실-판결(민사,형사)/판단-이유/사건명-법률-사실(형사)/요약

      <br>

    - 연구
        - 민사를 위한 챗봇에 형사 데이터가 필요한지
        - 사실 판결 순서가 나은지 판단 이유 순서가 나은지
        - 요약 데이터의 역할

### 데이터셋 관련 연구

1. 데이터셋의 유형
   - 판례
   - 법률
   - keyword 추출
   - 요약
   - 판례
   - Q/A
   - 약관 유불리
   - 사실-관련 법률
   - 사실-사건명
   - 사실-판결
   - 판결-이유

2. 진행할 연구
   - 말뭉치 실험
     1. 민사 판례만
        - 참조 조문을 관련 법으로, 사건명을 관련 판례
        - 임금 사건을 처리하는데 임금만 vs 모든 사건
        - 판례명, (판시사항, 판결요지, 참조조문, 참조판례) vs 이유 제공 순서
     2. 형사 판례 > 민사 판례
     3. 민사 형사 판례 섞어서
     4. 법률 > 민사
     5. 민사 > 법률
     6. 민사 법률 섞어서
   - 태스크 실험
     1. 말뭉치 > 태스크
     2. 태스크 > 말뭉치
     3. 섞어서
     4. keyword 추출
     5. 요약
     6. Q/A
     7. 약관 유불리
     8. 사실-관련 법률
     9. 사실-판결
     10. 판결-이유
   - 파라미터 실험

3. 평가 방법: 사건-법률,판례 zero shot/few shot
   
   <br>
   
4. 데이터 가공
   1. 민사 사건 개수 확인
   2. 테스트 데이터 선정